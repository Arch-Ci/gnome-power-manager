<?xml version="1.0"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" 
"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd" [
]>
<article id="index">
  <articleinfo>
    <title>GNOME Power Management Specification (with additions)</title>
    <releaseinfo>Version 2.19.x</releaseinfo>
    <date>March 26 2007</date>
    <authorgroup>
      <author>
        <firstname>Richard</firstname>
        <surname>Hughes</surname>
        <affiliation>
          <address>
            <email>richard@hughsie.com</email>
          </address>
        </affiliation>
      </author>
    </authorgroup>
  </articleinfo>

  <sect1 id="overview">
    <title>Overview</title>
    <para>
      A Power Management specification has been in used informally used for
      a few years on the GNOME desktop. There has never been any standardised
      nomenclature or API to allow desktops such as KDE and XFCE to interoperate.
      This has lead to technologies that have often been incompatible and
      resulted in poor integration of power management into desktop applications.
    </para>
  </sect1>

  <sect1 id="dbus">
    <title>DBUS API</title>
    <para>
      The interfaces are session-wide.
    </para>

    <informaltable>
      <tgroup cols="2">
        <tbody>
          <row>
            <entry>DBUS Service:</entry>
            <entry><literal>org.freedesktop.PowerManagement</literal></entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>

    <sect2 id="dbus-core">
      <title>Compulsory Basic Interface</title>
      <informaltable>
        <tgroup cols="2">
          <tbody>
            <row>
              <entry>DBUS Interface:</entry>
              <entry><literal>org.freedesktop.PowerManagement</literal></entry>
            </row>
            <row>
              <entry>DBUS Path:</entry>
              <entry><literal>/org/freedesktop/PowerManagement</literal></entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
      <para>
        Methods on interface <literal>org.freedesktop.PowerManagement</literal>
        define a compulsory base layer for interoperability.
      </para>

      <table id="dbus-core-methods">
        <title>Methods on interface <literal>org.freedesktop.PowerManagement</literal></title>
        <tgroup cols="4">
          <thead>
            <row>
              <entry>Name</entry>
              <entry>Input Parameters</entry>
              <entry>Return Values</entry>
              <entry>Throws Error</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>Suspend</literal></entry>
              <entry></entry>
              <entry></entry>
              <entry><literal>PermissionDenied</literal>, <literal>NoHardwareSupport</literal></entry>
              <entry>Attempt to suspend the system.</entry>
            </row>
            <row>
              <entry><literal>Hibernate</literal></entry>
              <entry></entry>
              <entry></entry>
              <entry><literal>PermissionDenied</literal>, <literal>NoHardwareSupport</literal></entry>
              <entry>Attempt to hibernate the system.</entry>
            </row>
            <row>
              <entry><literal>CanSuspend</literal></entry>
              <entry></entry>
              <entry><literal>bool</literal> can_suspend</entry>
              <entry></entry>
              <entry>If the current session user is able to suspend the system.</entry>
            </row>
            <row>
              <entry><literal>CanHibernate</literal></entry>
              <entry></entry>
              <entry><literal>bool</literal> can_hibernate</entry>
              <entry></entry>
              <entry>If the current session user is able to hibernate the system.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </sect2>

    <sect2 id="dbus-backlight">
      <title>Optional Backlight Interface</title>
      <para>
        <emphasis>NON STANDARDISED API</emphasis>
      </para>
      <para>
      <informaltable>
        <tgroup cols="2">
          <tbody>
            <row>
              <entry>DBUS Interface:</entry>
              <entry><literal>org.freedesktop.PowerManagement.Backlight</literal></entry>
            </row>
            <row>
              <entry>DBUS Path:</entry>
              <entry><literal>/org/freedesktop/PowerManagement/Backlight</literal></entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
        The <literal>org.freedesktop.PowerManagement.Backlight</literal>
        interface is optional, and allows a UI element to interact with
        the session daemon without using HAL directly.
      </para>
      <para>
        By using the session dameon, rather than HAL any UI can have
        preference settings saved, without two policies being forced on one device.
      </para>

      <table id="dbus-backlight-methods">
        <title>Methods on interface <literal>org.freedesktop.PowerManagement.Backlight</literal></title>
        <tgroup cols="4">
          <thead>
            <row>
              <entry>Name</entry>
              <entry>Input Parameters</entry>
              <entry>Return Values</entry>
              <entry>Throws Error</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>GetBrightness</literal></entry>
              <entry></entry>
              <entry><literal>uint</literal> percentage_brightness</entry>
              <entry><literal>NoHardwareSupport</literal></entry>
              <entry>Returns the current backlight brightness as a percentage.</entry>
            </row>
            <row>
              <entry><literal>SetBrightness</literal></entry>
              <entry><literal>uint</literal> percentage_brightness</entry>
              <entry></entry>
              <entry><literal>DeniedByPolicy</literal>, <literal>NoHardwareSupport</literal></entry>
              <entry>
                This may not immediately set the brightness if we are in a
                low power sleep mode, if the panel is switched off, or if the
                panel is in an idle dim state.
              </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <table id="dbus-backlight-signals">
        <title>Signals emitted from interface <literal>org.freedesktop.PowerManagement.Backlight</literal></title>
        <tgroup cols="3">
          <thead>
            <row>
              <entry>Name</entry>
              <entry>Return Values</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>BrightnessChanged</literal></entry>
              <entry><literal>uint</literal> percentage_brightness</entry>
              <entry>Signals the value of the current brightness has changed.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </sect2>
  </sect1>
</article>

